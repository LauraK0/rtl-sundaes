{"ast":null,"code":"var _jsxFileName = \"/Users/laurakeating/code/training/testing/rtl-sundaes/src/pages/entry/Options.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport ScoopOption from \"./ScoopOption\";\nimport ToppingOption from \"./ToppingOption\";\nimport AlertBanner from \"../common/AlertBanner\";\nimport { pricePerItem } from \"../../constants\";\nimport { formatCurrency } from \"../../utilities\";\nimport { useOrderDetails } from \"../../contexts/OrderDetails\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Options(_ref) {\n  _s();\n\n  let {\n    optionType\n  } = _ref;\n  const [items, setItems] = useState([]);\n  const [error, setError] = useState(false);\n  const {\n    totals\n  } = useOrderDetails();\n  useEffect(() => {\n    // create an abortController to attach to the network request\n    const controller = new AbortController();\n    axios // attach abortController to request\n    .get(`http://localhost:3030/${optionType}`, {\n      signal: controller.signal\n    }).then(response => setItems(response.data)).catch(error => {\n      if (error.name !== \"CanceledError\") {\n        setError(true);\n      }\n    });\n    return () => {\n      // on unmount, abort any active requests\n      controller.abort();\n    };\n  }, [optionType]);\n\n  if (error) {\n    // @ts-ignore\n    return /*#__PURE__*/_jsxDEV(AlertBanner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this);\n  }\n\n  const ItemComponent = optionType === \"scoops\" ? ScoopOption : ToppingOption;\n  const title = optionType[0].toUpperCase() + optionType.slice(1).toLowerCase();\n  const optionItems = items.map(item => /*#__PURE__*/_jsxDEV(ItemComponent, {\n    name: item.name,\n    imagePath: item.imagePath\n  }, item.name, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [formatCurrency(pricePerItem[optionType]), \" each\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [title, \" total: \", formatCurrency(totals[optionType])]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: optionItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Options, \"CHNT6vdoC8P3NiLwx7XfJByxoWI=\", false, function () {\n  return [useOrderDetails];\n});\n\n_c = Options;\n\nvar _c;\n\n$RefreshReg$(_c, \"Options\");","map":{"version":3,"names":["axios","useEffect","useState","Row","ScoopOption","ToppingOption","AlertBanner","pricePerItem","formatCurrency","useOrderDetails","Options","optionType","items","setItems","error","setError","totals","controller","AbortController","get","signal","then","response","data","catch","name","abort","ItemComponent","title","toUpperCase","slice","toLowerCase","optionItems","map","item","imagePath"],"sources":["/Users/laurakeating/code/training/testing/rtl-sundaes/src/pages/entry/Options.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport ScoopOption from \"./ScoopOption\";\nimport ToppingOption from \"./ToppingOption\";\nimport AlertBanner from \"../common/AlertBanner\";\nimport { pricePerItem } from \"../../constants\";\nimport { formatCurrency } from \"../../utilities\";\nimport { useOrderDetails } from \"../../contexts/OrderDetails\";\n\nexport default function Options({ optionType }) {\n  const [items, setItems] = useState([]);\n  const [error, setError] = useState(false);\n  const { totals } = useOrderDetails();\n\n  useEffect(() => {\n    // create an abortController to attach to the network request\n    const controller = new AbortController();\n    axios\n      // attach abortController to request\n      .get(`http://localhost:3030/${optionType}`, {\n        signal: controller.signal,\n      })\n      .then((response) => setItems(response.data))\n      .catch((error) => {\n        if (error.name !== \"CanceledError\") {\n          setError(true);\n        }\n      });\n    return () => {\n      // on unmount, abort any active requests\n      controller.abort();\n    };\n  }, [optionType]);\n\n  if (error) {\n    // @ts-ignore\n    return <AlertBanner />;\n  }\n\n  const ItemComponent = optionType === \"scoops\" ? ScoopOption : ToppingOption;\n  const title = optionType[0].toUpperCase() + optionType.slice(1).toLowerCase();\n\n  const optionItems = items.map((item) => (\n    <ItemComponent\n      key={item.name}\n      name={item.name}\n      imagePath={item.imagePath}\n    />\n  ));\n\n  return (\n    <>\n      <h2>{title}</h2>\n      <p>{formatCurrency(pricePerItem[optionType])} each</p>\n      <p>\n        {title} total: {formatCurrency(totals[optionType])}\n      </p>\n      <Row>{optionItems}</Row>\n    </>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,cAAT,QAA+B,iBAA/B;AACA,SAASC,eAAT,QAAgC,6BAAhC;;;AAEA,eAAe,SAASC,OAAT,OAAiC;EAAA;;EAAA,IAAhB;IAAEC;EAAF,CAAgB;EAC9C,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,KAAD,CAAlC;EACA,MAAM;IAAEc;EAAF,IAAaP,eAAe,EAAlC;EAEAR,SAAS,CAAC,MAAM;IACd;IACA,MAAMgB,UAAU,GAAG,IAAIC,eAAJ,EAAnB;IACAlB,KAAK,CACH;IADG,CAEFmB,GAFH,CAEQ,yBAAwBR,UAAW,EAF3C,EAE8C;MAC1CS,MAAM,EAAEH,UAAU,CAACG;IADuB,CAF9C,EAKGC,IALH,CAKSC,QAAD,IAAcT,QAAQ,CAACS,QAAQ,CAACC,IAAV,CAL9B,EAMGC,KANH,CAMUV,KAAD,IAAW;MAChB,IAAIA,KAAK,CAACW,IAAN,KAAe,eAAnB,EAAoC;QAClCV,QAAQ,CAAC,IAAD,CAAR;MACD;IACF,CAVH;IAWA,OAAO,MAAM;MACX;MACAE,UAAU,CAACS,KAAX;IACD,CAHD;EAID,CAlBQ,EAkBN,CAACf,UAAD,CAlBM,CAAT;;EAoBA,IAAIG,KAAJ,EAAW;IACT;IACA,oBAAO,QAAC,WAAD;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,MAAMa,aAAa,GAAGhB,UAAU,KAAK,QAAf,GAA0BP,WAA1B,GAAwCC,aAA9D;EACA,MAAMuB,KAAK,GAAGjB,UAAU,CAAC,CAAD,CAAV,CAAckB,WAAd,KAA8BlB,UAAU,CAACmB,KAAX,CAAiB,CAAjB,EAAoBC,WAApB,EAA5C;EAEA,MAAMC,WAAW,GAAGpB,KAAK,CAACqB,GAAN,CAAWC,IAAD,iBAC5B,QAAC,aAAD;IAEE,IAAI,EAAEA,IAAI,CAACT,IAFb;IAGE,SAAS,EAAES,IAAI,CAACC;EAHlB,GACOD,IAAI,CAACT,IADZ;IAAA;IAAA;IAAA;EAAA,QADkB,CAApB;EAQA,oBACE;IAAA,wBACE;MAAA,UAAKG;IAAL;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAA,WAAIpB,cAAc,CAACD,YAAY,CAACI,UAAD,CAAb,CAAlB;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAA,WACGiB,KADH,cACkBpB,cAAc,CAACQ,MAAM,CAACL,UAAD,CAAP,CADhC;IAAA;MAAA;MAAA;MAAA;IAAA,QAHF,eAME,QAAC,GAAD;MAAA,UAAMqB;IAAN;MAAA;MAAA;MAAA;IAAA,QANF;EAAA,gBADF;AAUD;;GAnDuBtB,O;UAGHD,e;;;KAHGC,O"},"metadata":{},"sourceType":"module"}